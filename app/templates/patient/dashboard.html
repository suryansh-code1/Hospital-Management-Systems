{% extends 'base.html' %}
{% block content %}
<h3 class="mb-3">My Appointments</h3>
<div class="card">
  <div class="table-responsive">
    <table class="table table-striped align-middle mb-0">
      <thead class="table-light"><tr><th>Date</th><th>Time</th><th>Doctor</th><th>Status</th><th class="text-end">Actions</th></tr></thead>
      <tbody>
      {% for a in appointments %}
        <tr>
          <td>{{ a.date }}</td><td>{{ a.time }}</td><td>{{ a.doctor.name }}</td><td>{{ a.status }}</td>
          <td class="text-end">
            {% if a.status == 'Booked' %}
            <form method="post" action="/patient/cancel/{{ a.id }}" class="d-inline">
              <button class="btn btn-sm btn-outline-danger" aria-label="Cancel appointment {{ a.id }}" data-bs-toggle="tooltip" title="Cancel">
                <i class="bi bi-x-circle"></i>
              </button>
            </form>
            {% endif %}
          </td>
        </tr>
      {% else %}
        <tr><td colspan="5" class="text-center text-muted py-4">
          <div class="d-flex flex-column align-items-center">
            <i class="bi bi-calendar2-x fs-1 mb-2"></i>
            <div>You have no upcoming appointments</div>
            <a class="btn btn-primary btn-sm mt-2" href="/patient/book">Book one now</a>
          </div>
        </td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
